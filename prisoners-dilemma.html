<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prisoner's Dilemma - MathFun</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <nav class="nav-bar">
        <a href="/" class="nav-logo">MathFun</a>
        <div class="nav-links">
            <a href="/monty-hall.html" class="nav-link">Monty Hall</a>
            <a href="/prisoners-dilemma.html" class="nav-link active">Prisoner's Dilemma</a>
            <a href="/staircase.html" class="nav-link">Staircase</a>
        </div>
    </nav>

    <div class="container">
        <main>
            <section class="game-section">
                <h1>Prisoner's Dilemma</h1>
                <p class="description">
                    Two prisoners are arrested and interrogated separately. Each has two choices:
                    cooperate with the other (stay silent) or defect (betray the other).
                    The outcome depends on what both choose. What's the optimal strategy?
                </p>

                <div class="strategy-selector">
                    <label for="opponent-strategy">Opponent Strategy:</label>
                    <select id="opponent-strategy">
                        <option value="random">Random</option>
                        <option value="always-cooperate">Always Cooperate</option>
                        <option value="always-defect">Always Defect</option>
                        <option value="tit-for-tat" selected>Tit-for-Tat (Copycat)</option>
                        <option value="grudger">Grudger (One Strike)</option>
                    </select>
                </div>

                <div id="game-container">
                    <div class="choice-buttons">
                        <button id="cooperate-btn" class="choice-btn cooperate">
                            <span class="icon">ü§ù</span>
                            <span>Cooperate</span>
                        </button>
                        <button id="defect-btn" class="choice-btn defect">
                            <span class="icon">‚öîÔ∏è</span>
                            <span>Defect</span>
                        </button>
                    </div>

                    <div id="result-area" class="opponent-choice" style="display: none;">
                        <h3>Round Result</h3>
                        <div id="round-result"></div>
                    </div>

                    <div id="message" class="message"></div>

                    <div class="controls">
                        <button id="reset-btn" class="btn">Reset Game</button>
                    </div>
                </div>

                <div class="stats">
                    <h3>Game Statistics</h3>
                    <div class="stats-grid">
                        <div class="stat-box">
                            <h4>Your Score</h4>
                            <p class="stat-percent" id="your-score">0</p>
                        </div>
                        <div class="stat-box">
                            <h4>Opponent Score</h4>
                            <p class="stat-percent" id="opponent-score">0</p>
                        </div>
                        <div class="stat-box">
                            <h4>Rounds Played</h4>
                            <p class="stat-percent" id="rounds-played">0</p>
                        </div>
                        <div class="stat-box">
                            <h4>Current Strategy</h4>
                            <p class="stat-value" id="current-strategy">Tit-for-Tat</p>
                        </div>
                    </div>
                </div>

                <div class="payoff-matrix">
                    <h3>Payoff Matrix</h3>
                    <table>
                        <thead>
                            <tr>
                                <th></th>
                                <th>Opponent Cooperates</th>
                                <th>Opponent Defects</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <th>You Cooperate</th>
                                <td><span class="you">+3</span> / <span class="opponent">+3</span></td>
                                <td><span class="you">0</span> / <span class="opponent">+5</span></td>
                            </tr>
                            <tr>
                                <th>You Defect</th>
                                <td><span class="you">+5</span> / <span class="opponent">0</span></td>
                                <td><span class="you">+1</span> / <span class="opponent">+1</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="explanation">
                    <h3>Understanding the Dilemma</h3>
                    <p>
                        The Prisoner's Dilemma demonstrates why two rational individuals might not cooperate,
                        even when it's in their best interest. In a single round, defecting is always better
                        regardless of what the opponent does. However, in repeated games, strategies like
                        "Tit-for-Tat" (cooperate first, then copy opponent's last move) often perform best
                        because they encourage mutual cooperation while punishing defection.
                    </p>
                    <p style="margin-top: 15px;">
                        <strong>Try different strategies:</strong> Random plays unpredictably, Always Cooperate
                        is nice but exploitable, Always Defect is selfish, Tit-for-Tat is forgiving but firm,
                        and Grudger cooperates until betrayed once, then defects forever.
                    </p>
                </div>
            </section>
        </main>
    </div>

    <script type="module" src="/prisoners-dilemma.js"></script>
</body>
</html>
