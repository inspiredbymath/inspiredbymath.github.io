import{m as l,_ as i}from"./index-pHnGcn-R.js";/* empty css              *//* empty css                      */class p{constructor(){this.yourScore=0,this.opponentScore=0,this.rounds=0,this.history=[],this.opponentStrategy="tit-for-tat",this.setupEventListeners(),this.updateDisplay(),this.loadRelatedPosts()}setupEventListeners(){document.getElementById("cooperate-btn").addEventListener("click",()=>{this.playRound("cooperate")}),document.getElementById("defect-btn").addEventListener("click",()=>{this.playRound("defect")}),document.getElementById("reset-btn").addEventListener("click",()=>{this.resetGame()}),document.getElementById("opponent-strategy").addEventListener("change",e=>{this.opponentStrategy=e.target.value,this.resetGame(),this.updatePerformanceAnalysis()})}getOpponentChoice(){switch(this.opponentStrategy){case"random":return Math.random()<.5?"cooperate":"defect";case"always-cooperate":return"cooperate";case"always-defect":return"defect";case"tit-for-tat":return this.history.length===0?"cooperate":this.history[this.history.length-1].yourChoice;case"grudger":return this.history.some(t=>t.yourChoice==="defect")?"defect":"cooperate";default:return"cooperate"}}calculatePayoff(e,t){return e==="cooperate"&&t==="cooperate"?{yourPoints:3,opponentPoints:3}:e==="cooperate"&&t==="defect"?{yourPoints:0,opponentPoints:5}:e==="defect"&&t==="cooperate"?{yourPoints:5,opponentPoints:0}:{yourPoints:1,opponentPoints:1}}playRound(e){const t=this.getOpponentChoice(),{yourPoints:r,opponentPoints:o}=this.calculatePayoff(e,t);this.yourScore+=r,this.opponentScore+=o,this.rounds++,this.history.push({yourChoice:e,opponentChoice:t,yourPoints:r,opponentPoints:o}),this.showRoundResult(e,t,r,o),this.updateDisplay()}showRoundResult(e,t,r,o){const s=document.getElementById("result-area"),n=document.getElementById("round-result"),c=e==="cooperate"?"ü§ù Cooperated":"‚öîÔ∏è Defected",d=t==="cooperate"?"ü§ù Cooperated":"‚öîÔ∏è Defected";n.innerHTML=`
            <p><strong>You:</strong> ${c} ‚Üí <strong>+${r} points</strong></p>
            <p><strong>Opponent:</strong> ${d} ‚Üí <strong>+${o} points</strong></p>
        `,s.style.display="block";let a="";e==="cooperate"&&t==="cooperate"?a="Mutual cooperation! Both benefit.":e==="defect"&&t==="defect"?a="Mutual defection! Both lose out.":e==="cooperate"&&t==="defect"?a="You were betrayed! The sucker's payoff.":a="You exploited their cooperation!",document.getElementById("message").textContent=a}updateDisplay(){document.getElementById("your-score").textContent=this.yourScore,document.getElementById("opponent-score").textContent=this.opponentScore,document.getElementById("rounds-played").textContent=this.rounds;const e={random:"Random","always-cooperate":"Always Cooperate","always-defect":"Always Defect","tit-for-tat":"Tit-for-Tat",grudger:"Grudger"};document.getElementById("current-strategy").textContent=e[this.opponentStrategy],this.updatePerformanceAnalysis()}getOptimalPointsPerRound(e){return{random:3,"always-cooperate":5,"always-defect":1,"tit-for-tat":3,grudger:3}[e]||3}getStrategyRecommendation(e){return{random:"Against Random, cooperate for mutual benefit when possible, but be prepared to defect.","always-cooperate":"Against Always-Cooperate, defecting every round maximizes your score (5 pts/round), but cooperation is kinder (3 pts/round).","always-defect":"Against Always-Defect, you must defect to avoid exploitation (1 pt/round each).","tit-for-tat":"Against Tit-for-Tat, always cooperate to achieve mutual benefit (3 pts/round).",grudger:"Against Grudger, never defect! One betrayal means permanent defection. Cooperate for 3 pts/round."}[e]||"Play cooperatively for mutual benefit."}calculatePerfectPlayScore(){let e=0;return this.history.forEach(t=>{t.opponentChoice==="cooperate"?e+=5:e+=1}),e}updatePerformanceAnalysis(){const e={random:"Random","always-cooperate":"Always-Cooperate","always-defect":"Always-Defect","tit-for-tat":"Tit-for-Tat",grudger:"Grudger"};if(document.getElementById("current-opponent").textContent=e[this.opponentStrategy],document.getElementById("strategy-recommendation").textContent=this.getStrategyRecommendation(this.opponentStrategy),this.rounds===0){document.getElementById("actual-avg").textContent="0",document.getElementById("optimal-avg").textContent=this.getOptimalPointsPerRound(this.opponentStrategy).toFixed(2),document.getElementById("efficiency-fill").style.width="0%",document.getElementById("efficiency-text").textContent="‚Äî",document.getElementById("actual-score").textContent="0",document.getElementById("perfect-score").textContent="0";return}const t=(this.yourScore/this.rounds).toFixed(2),r=this.getOptimalPointsPerRound(this.opponentStrategy).toFixed(2);document.getElementById("actual-avg").textContent=t,document.getElementById("optimal-avg").textContent=r;const o=t/r*100;document.getElementById("efficiency-fill").style.width=`${Math.min(o,100)}%`,document.getElementById("efficiency-text").textContent=`${o.toFixed(1)}% efficiency`;const s=document.getElementById("efficiency-fill");o>=80?s.style.background="linear-gradient(90deg, #10b981, #34d399)":o>=60?s.style.background="linear-gradient(90deg, #f59e0b, #fbbf24)":s.style.background="linear-gradient(90deg, #ef4444, #f87171)";const n=this.calculatePerfectPlayScore();document.getElementById("actual-score").textContent=this.yourScore,document.getElementById("perfect-score").textContent=n}resetGame(){this.yourScore=0,this.opponentScore=0,this.rounds=0,this.history=[],document.getElementById("result-area").style.display="none",document.getElementById("message").textContent="Make your choice: Cooperate or Defect?",this.updateDisplay()}async loadRelatedPosts(){const e=Object.assign({"./posts/01-intro-to-monty-hall.md":()=>i(()=>import("./01-intro-to-monty-hall-D3KeI0wJ.js"),[]).then(o=>o.default),"./posts/02-prisoners-dilemma-strategies.md":()=>i(()=>import("./02-prisoners-dilemma-strategies-Dz3hZ4T1.js"),[]).then(o=>o.default),"./posts/03-staircase-fibonacci.md":()=>i(()=>import("./03-staircase-fibonacci-BvkO1jfw.js"),[]).then(o=>o.default)}),t=document.getElementById("related-posts-container"),r=[];for(const o in e){const s=await e[o](),{data:n}=l(s);n.game==="prisoners-dilemma"&&r.push({slug:n.slug,title:n.title,excerpt:n.excerpt})}if(r.length>0){t.innerHTML="<h3>Related Articles</h3>";const o=document.createElement("div");o.className="related-posts-list",r.forEach(s=>{const n=document.createElement("a");n.href=`./post.html?slug=${s.slug}`,n.className="related-post-card",n.innerHTML=`
                    <h4>${s.title}</h4>
                    <p>${s.excerpt}</p>
                `,o.appendChild(n)}),t.appendChild(o)}}}new p;
